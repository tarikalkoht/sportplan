/**
 * Diet Templates Module
 * Contains predefined diet plans for different goals and preferences
 */

// Diet templates for different preferences
const dietTemplates = {
    // Standard diet plan
    standard: {
        title: 'نظام غذائي متوازن',
        description: 'نظام غذائي متوازن يحتوي على جميع العناصر الغذائية الأساسية',
        goals: {
            weight_loss: {
                macros: {
                    protein: '30%',
                    carbs: '40%',
                    fats: '30%'
                },
                meals: [
                    {
                        name: 'الإفطار',
                        suggestions: [
                            'شوفان مع فواكه وعسل (حصة متوسطة)',
                            'بيض مسلوق (2) مع خبز أسمر',
                            'زبادي يوناني قليل الدسم مع المكسرات والعسل'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة صباحية',
                        suggestions: [
                            'تفاحة صغيرة مع قليل من المكسرات',
                            'موزة صغيرة',
                            'شرائح خيار وجزر'
                        ]
                    },
                    {
                        name: 'الغداء',
                        suggestions: [
                            'صدر دجاج مشوي (100 جرام) مع خضروات وربع كوب أرز بني',
                            'سلطة تونة مع الخضروات (بدون مايونيز)',
                            'عدس (نصف كوب) مع خضروات وقطعة خبز أسمر صغيرة'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة مسائية',
                        suggestions: [
                            'زبادي قليل الدسم',
                            'حفنة صغيرة من الفواكه الموسمية',
                            'حفنة صغيرة من المكسرات غير المملحة'
                        ]
                    },
                    {
                        name: 'العشاء',
                        suggestions: [
                            'سمك مشوي (100 جرام) مع سلطة خضراء كبيرة',
                            'شوربة خضار مع نصف قطعة خبز أسمر',
                            'أومليت من بيضتين مع الخضروات'
                        ]
                    }
                ],
                tips: [
                    'تناول وجبات أصغر حجماً',
                    'اشرب ماء قبل الوجبات بـ 30 دقيقة',
                    'تجنب السكريات المضافة',
                    'راقب أحجام الحصص الغذائية'
                ]
            },
            muscle_gain: {
                macros: {
                    protein: '35%',
                    carbs: '45%',
                    fats: '20%'
                },
                meals: [
                    {
                        name: 'الإفطار',
                        suggestions: [
                            'شوفان (كوب كامل) مع فواكه وعسل ومكسرات',
                            'بيض (3-4) مع خبز أسمر وأفوكادو',
                            'زبادي يوناني كامل الدسم مع الموز والعسل والمكسرات'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة صباحية',
                        suggestions: [
                            'موزة مع ملعقة كبيرة زبدة فول سوداني',
                            'شطيرة تونة صغيرة',
                            'شيك بروتين مع الحليب والموز'
                        ]
                    },
                    {
                        name: 'الغداء',
                        suggestions: [
                            'صدر دجاج كبير مع كوب أرز بني وخضروات',
                            'لحم بقري مشوي (150 جرام) مع البطاطا الحلوة والخضروات',
                            'سلمون مشوي مع الكينوا وسلطة'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة مسائية',
                        suggestions: [
                            'زبادي يوناني مع العسل والجرانولا',
                            'بيضتان مسلوقتان مع قطعة جبن',
                            'حفنة من المكسرات والفواكه المجففة'
                        ]
                    },
                    {
                        name: 'العشاء',
                        suggestions: [
                            'سمك مشوي كبير مع الأرز البني والخضروات',
                            'دجاج مشوي (150 جرام) مع البطاطا المشوية والخضروات',
                            'ستيك لحم مع سلطة كبيرة وبطاطا مشوية'
                        ]
                    },
                    {
                        name: 'وجبة ما قبل النوم (اختيارية)',
                        suggestions: [
                            'كوب حليب دافئ',
                            'زبادي يوناني بالعسل',
                            'بيضة مسلوقة'
                        ]
                    }
                ],
                tips: [
                    'تناول البروتين مع كل وجبة',
                    'تناول النشويات المعقدة بعد التمرين',
                    'اشرب كمية كافية من الماء',
                    'لا تتخطى أي وجبة'
                ]
            },
            fitness: {
                macros: {
                    protein: '25%',
                    carbs: '50%',
                    fats: '25%'
                },
                meals: [
                    {
                        name: 'الإفطار',
                        suggestions: [
                            'شوفان مع فواكه وعسل ومكسرات',
                            'بيض (2) مع خبز أسمر وأفوكادو',
                            'زبادي يوناني مع الفواكه والعسل'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة صباحية',
                        suggestions: [
                            'تفاحة مع قليل من المكسرات',
                            'موزة مع ملعقة زبدة فول سوداني',
                            'حفنة من الفواكه المجففة والمكسرات'
                        ]
                    },
                    {
                        name: 'الغداء',
                        suggestions: [
                            'صدر دجاج مشوي مع الأرز البني والخضروات',
                            'سلطة تونة مع الخضروات والزيتون',
                            'عدس مع الخضروات وخبز أسمر'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة مسائية',
                        suggestions: [
                            'زبادي مع العسل',
                            'شرائح فواكه موسمية',
                            'حفنة من المكسرات غير المملحة'
                        ]
                    },
                    {
                        name: 'العشاء',
                        suggestions: [
                            'سمك مشوي مع سلطة خضراء كبيرة',
                            'شوربة خضار مع قطعة خبز أسمر',
                            'أومليت مع الخضروات وجبنة قليلة الدسم'
                        ]
                    }
                ],
                tips: [
                    'تناول مجموعة متنوعة من الأطعمة',
                    'اهتم بالألوان المتعددة في طبقك',
                    'تناول الخضروات والفواكه الطازجة يومياً',
                    'تجنب الأطعمة المصنعة قدر الإمكان'
                ]
            }
        }
    },
    
    // High protein diet plan
    high_protein: {
        title: 'نظام غذائي غني بالبروتين',
        description: 'نظام غذائي يركز على مصادر البروتين لدعم نمو العضلات والتعافي',
        goals: {
            weight_loss: {
                macros: {
                    protein: '40%',
                    carbs: '30%',
                    fats: '30%'
                },
                meals: [
                    {
                        name: 'الإفطار',
                        suggestions: [
                            'بيض (3) مع شريحة خبز أسمر',
                            'زبادي يوناني عالي البروتين مع قليل من الفواكه',
                            'شيك بروتين مع سبانخ وتفاح'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة صباحية',
                        suggestions: [
                            'شريحة ديك رومي',
                            'بيضة مسلوقة',
                            'قطعة جبن قليلة الدسم'
                        ]
                    },
                    {
                        name: 'الغداء',
                        suggestions: [
                            'صدر دجاج مشوي (120 جرام) مع سلطة خضراء كبيرة',
                            'سلطة تونة كبيرة مع البقوليات',
                            'توفو (100 جرام) مع الخضروات المطبوخة'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة مسائية',
                        suggestions: [
                            'زبادي يوناني قليل الدسم',
                            'علبة تونة صغيرة',
                            'حفنة من المكسرات (30 جرام)'
                        ]
                    },
                    {
                        name: 'العشاء',
                        suggestions: [
                            'سمك مشوي (120 جرام) مع الخضروات',
                            'صدر دجاج مشوي مع سلطة خضراء',
                            'بروتين نباتي (عدس أو حمص) مع الخضروات'
                        ]
                    }
                ],
                tips: [
                    'تناول البروتين في بداية كل وجبة',
                    'اشرب كمية كافية من الماء',
                    'اختر مصادر البروتين قليلة الدهون',
                    'تجنب الكربوهيدرات البسيطة'
                ]
            },
            muscle_gain: {
                macros: {
                    protein: '40%',
                    carbs: '40%',
                    fats: '20%'
                },
                meals: [
                    {
                        name: 'الإفطار',
                        suggestions: [
                            'أومليت 5 بيضات مع الخضروات وقطعة جبن',
                            'شوفان مع بروتين مصل اللبن وزبدة فول سوداني',
                            'زبادي يوناني عالي البروتين مع الموز والعسل والمكسرات'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة صباحية',
                        suggestions: [
                            'شيك بروتين مع موزة',
                            'علبة تونة',
                            '3 بيضات مسلوقة'
                        ]
                    },
                    {
                        name: 'الغداء',
                        suggestions: [
                            'صدر دجاج كبير (200 جرام) مع البطاطا الحلوة',
                            'ستيك لحم (200 جرام) مع الخضروات المشوية',
                            'سلطة سلمون (150 جرام) مع الكينوا'
                        ]
                    },
                    {
                        name: 'وجبة ما بعد التمرين',
                        suggestions: [
                            'شيك بروتين مع الموز',
                            'زبادي يوناني مع العسل',
                            'صدر دجاج (100 جرام) مع الأرز البني'
                        ]
                    },
                    {
                        name: 'العشاء',
                        suggestions: [
                            'سمك مشوي (200 جرام) مع الأرز البني والخضروات',
                            'برغر لحم (150 جرام) مع سلطة خضراء كبيرة',
                            'صدر دجاج (150 جرام) مع الفاصوليا والخضروات'
                        ]
                    },
                    {
                        name: 'وجبة ما قبل النوم',
                        suggestions: [
                            'بروتين بطيء الهضم (كازين)',
                            'زبادي يوناني مع المكسرات',
                            'جبن قريش مع قليل من العسل'
                        ]
                    }
                ],
                tips: [
                    'استهدف 1.6-2 جرام بروتين لكل كيلوجرام من وزن الجسم',
                    'وزع البروتين على مدار اليوم',
                    'تناول البروتين قبل وبعد التمرين',
                    'تناول البروتين قبل النوم لدعم نمو العضلات أثناء النوم'
                ]
            },
            fitness: {
                macros: {
                    protein: '35%',
                    carbs: '40%',
                    fats: '25%'
                },
                meals: [
                    {
                        name: 'الإفطار',
                        suggestions: [
                            'شوفان مع بروتين مصل اللبن والفواكه',
                            'بيض (3) مع خبز أسمر وأفوكادو',
                            'زبادي يوناني مع الجرانولا والفواكه'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة صباحية',
                        suggestions: [
                            'شيك بروتين مع الفواكه',
                            'بيضتان مسلوقتان',
                            'شرائح ديك رومي مع الخضار'
                        ]
                    },
                    {
                        name: 'الغداء',
                        suggestions: [
                            'صدر دجاج (150 جرام) مع الأرز البني والخضروات',
                            'سمك مشوي (150 جرام) مع البطاطا الحلوة',
                            'عدس وحمص مع الخضروات'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة مسائية',
                        suggestions: [
                            'زبادي يوناني مع العسل',
                            'جبن قريش مع الفواكه',
                            'حفنة من المكسرات (30 جرام)'
                        ]
                    },
                    {
                        name: 'العشاء',
                        suggestions: [
                            'سمك مشوي (150 جرام) مع سلطة خضراء',
                            'صدر دجاج مشوي مع الكينوا والخضروات',
                            'توفو أو تمبيه مع الخضروات المشوية'
                        ]
                    }
                ],
                tips: [
                    'تناول البروتين مع كل وجبة',
                    'اختر مصادر بروتين متنوعة',
                    'تناول البروتين النباتي أيضاً',
                    'اشرب كمية كافية من الماء'
                ]
            }
        }
    },
    
    // Vegetarian diet plan
    vegetarian: {
        title: 'نظام غذائي نباتي',
        description: 'نظام غذائي نباتي متوازن غني بالعناصر الغذائية الأساسية',
        goals: {
            weight_loss: {
                macros: {
                    protein: '25%',
                    carbs: '45%',
                    fats: '30%'
                },
                meals: [
                    {
                        name: 'الإفطار',
                        suggestions: [
                            'شوفان مع حليب نباتي وفواكه',
                            'توفو مقلي مع الخضروات',
                            'عصيدة مع زبدة اللوز وفواكه'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة صباحية',
                        suggestions: [
                            'سموثي أخضر مع السبانخ والموز',
                            'تفاح مع زبدة اللوز',
                            'حمص مع شرائح الخضار'
                        ]
                    },
                    {
                        name: 'الغداء',
                        suggestions: [
                            'سلطة كينوا مع الحمص والخضروات (حصة صغيرة)',
                            'برغر نباتي صغير مع سلطة جانبية',
                            'شوربة عدس مع قطعة خبز أسمر صغيرة'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة مسائية',
                        suggestions: [
                            'زبادي نباتي قليل السكر',
                            'حفنة صغيرة من الفواكه الموسمية',
                            'حفنة صغيرة من المكسرات غير المملحة'
                        ]
                    },
                    {
                        name: 'العشاء',
                        suggestions: [
                            'كاري خضروات (بدون زيت إضافي) مع نصف كوب أرز بني',
                            'فاصوليا مطبوخة مع الخضروات وقطعة خبز أسمر صغيرة',
                            'توفو مشوي مع الخضروات المشوية'
                        ]
                    }
                ],
                tips: [
                    'ركز على الخضروات منخفضة السعرات والغنية بالألياف',
                    'تجنب المنتجات النباتية المصنعة',
                    'انتبه لأحجام الحصص من المكسرات والزيوت',
                    'اشرب الكثير من الماء'
                ]
            },
            muscle_gain: {
                macros: {
                    protein: '30%',
                    carbs: '45%',
                    fats: '25%'
                },
                meals: [
                    {
                        name: 'الإفطار',
                        suggestions: [
                            'شوفان مع حليب نباتي وبروتين نباتي وزبدة اللوز',
                            'توفو مقلي مع الخضروات والكينوا',
                            'عصيدة مع زبدة الفول السوداني والفواكه'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة صباحية',
                        suggestions: [
                            'سموثي بروتين نباتي مع السبانخ والموز',
                            'تفاح مع زبدة اللوز',
                            'حمص مع شرائح الخضار'
                        ]
                    },
                    {
                        name: 'الغداء',
                        suggestions: [
                            'سلطة كينوا مع الحمص والخضروات (حصة كبيرة)',
                            'برغر نباتي كبير مع سلطة جانبية',
                            'شوربة عدس مع قطعة خبز أسمر كبيرة'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة مسائية',
                        suggestions: [
                            'زبادي نباتي عالي البروتين',
                            'حفنة من الفواكه المجففة والمكسرات',
                            'شرائح خضار مع حمص'
                        ]
                    },
                    {
                        name: 'العشاء',
                        suggestions: [
                            'كاري خضروات مع كوب أرز بني',
                            'فاصوليا مطبوخة مع الخضروات وقطعة خبز أسمر كبيرة',
                            'توفو مشوي مع الخضروات المشوية والكينوا'
                        ]
                    },
                    {
                        name: 'وجبة ما قبل النوم',
                        suggestions: [
                            'بروتين نباتي بطيء الهضم (مثل بروتين البازلاء)',
                            'زبادي نباتي مع المكسرات',
                            'جبن نباتي مع قليل من العسل'
                        ]
                    }
                ],
                tips: [
                    'تناول البروتين مع كل وجبة',
                    'اختر مصادر بروتين نباتية متنوعة',
                    'تناول البروتين قبل وبعد التمرين',
                    'اشرب كمية كافية من الماء'
                ]
            },
            fitness: {
                macros: {
                    protein: '25%',
                    carbs: '50%',
                    fats: '25%'
                },
                meals: [
                    {
                        name: 'الإفطار',
                        suggestions: [
                            'شوفان مع حليب نباتي وفواكه',
                            'توفو مقلي مع الخضروات',
                            'عصيدة مع زبدة اللوز وفواكه'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة صباحية',
                        suggestions: [
                            'سموثي أخضر مع السبانخ والموز',
                            'تفاح مع زبدة اللوز',
                            'حمص مع شرائح الخضار'
                        ]
                    },
                    {
                        name: 'الغداء',
                        suggestions: [
                            'سلطة كينوا مع الحمص والخضروات (حصة متوسطة)',
                            'برغر نباتي مع سلطة جانبية',
                            'شوربة عدس مع قطعة خبز أسمر متوسطة'
                        ]
                    },
                    {
                        name: 'وجبة خفيفة مسائية',
                        suggestions: [
                            'زبادي نباتي قليل السكر',
                            'حفنة صغيرة من الفواكه الموسمية',
                            'حفنة صغيرة من المكسرات غير المملحة'
                        ]
                    },
                    {
                        name: 'العشاء',
                        suggestions: [
                            'كاري خضروات (بدون زيت إضافي) مع نصف كوب أرز بني',
                            'فاصوليا مطبوخة مع الخضروات وقطعة خبز أسمر صغيرة',
                            'توفو مشوي مع الخضروات المشوية'
                        ]
                    }
                ],
                tips: [
                    'ركز على الخضروات منخفضة السعرات والغنية بالألياف',
                    'تجنب المنتجات النباتية المصنعة',
                    'انتبه لأحجام الحصص من المكسرات والزيوت',
                    'اشرب الكثير من الماء'
                ]
            }
        }
    }
};

/**
 * Get a diet plan based on user goals and preferences
 * @param {string} goal - User fitness goal
 * @param {string} dietType - Diet type preference
 * @param {number} targetCalories - Target calories per day
 * @returns {Object} The appropriate diet plan
 */
function getDietPlan(goal, dietType, targetCalories) {
    // Default to standard diet if type is invalid
    const dietKey = ['standard', 'high_protein', 'vegetarian'].includes(dietType) ? dietType : 'standard';
    
    // Default to fitness if goal is invalid
    const goalKey = ['weight_loss', 'muscle_gain', 'fitness'].includes(goal) ? goal : 'fitness';
    
    // Get the diet template
    const template = dietTemplates[dietKey];
    const goalPlan = template.goals[goalKey];
    
    // Create a customized plan
    return {
        title: template.title,
        description: template.description,
        macros: goalPlan.macros,
        meals: goalPlan.meals,
        tips: goalPlan.tips
    };
}

module.exports = {
    getDietPlan
};